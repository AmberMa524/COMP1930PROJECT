<!--
  This webpage has been used as an template for deskptop.html and tablets.html
-->
<!doctype html>

<html lang="en">

<head>
  <meta charset="utf-8">
  <title>My BCIT Project</title>
  <meta name="comp1930 boilerplate code" content="my bcit project">
  <meta name="author" content="BCIT">

  <!-- Bootstrap for Mobile-first -->
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>

  <!-- Add Firebase products that you want to use -->
  <script src="https://www.gstatic.com/firebasejs/7.2.2/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/7.2.2/firebase-auth.js"></script>
  <script src="https://www.gstatic.com/firebasejs/7.2.2/firebase-firestore.js"></script>
  <script src="https://cdn.firebase.com/libs/firebaseui/3.5.2/firebaseui.js"></script>
  <link type="text/css" rel="stylesheet" href="https://cdn.firebase.com/libs/firebaseui/3.5.2/firebaseui.css" />

  <!-- Optional styles and scripts of your own -->
  <link rel="stylesheet" href="styles/style.css">
  <script src="scripts/script.js"></script>
  <!-- Firebase App (the core Firebase SDK) is always required and must be listed first -->
  <script src="https://www.gstatic.com/firebasejs/7.2.2/firebase-app.js"></script>

  <!-- If you enabled Analytics in your project, add the Firebase SDK for Analytics -->
  <script src="https://www.gstatic.com/firebasejs/7.2.2/firebase-analytics.js"></script>

  <!-- Add Firebase products that you want to use -->
  <script src="https://www.gstatic.com/firebasejs/7.2.2/firebase-auth.js"></script>
  <script src="https://www.gstatic.com/firebasejs/7.2.2/firebase-firestore.js"></script>

  <script src="https://cdn.firebase.com/libs/firebaseui/3.5.2/firebaseui.js"></script>
  <link type="text/css" rel="stylesheet" href="https://cdn.firebase.com/libs/firebaseui/3.5.2/firebaseui.css" />
  <script>
    // Your web app's Firebase configuration
    var firebaseConfig = {
      apiKey: "AIzaSyCWFoAHHXig43bLV6OG367BqhOPBlqrh4Q",
      authDomain: "oct31-72990.firebaseapp.com",
      databaseURL: "https://oct31-72990.firebaseio.com",
      projectId: "oct31-72990",
      storageBucket: "oct31-72990.appspot.com",
      messagingSenderId: "617005703861",
      appId: "1:617005703861:web:fdb1920a07d1b6338854fc",
      measurementId: "G-6T24W0NH6V"
    };
    // Initialize Firebase
    firebase.initializeApp(firebaseConfig);
    // firebase.analytics();
    var db = firebase.firestore();
  </script>


</head>

<body>
  <!--

    Creates Nav bar and DOM elements which are manipulated by javascript and jquerry using databse.
  -->
  <header id="myHeader">
    <nav class="navbar navbar-expand-lg navbar-light bg-light">
      <a class="navbar-brand" href="#">TechAssist</a>
      <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent"
        aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>

      <div class="collapse navbar-collapse" id="navbarSupportedContent">
        <ul class="navbar-nav mr-auto">
          <li class="nav-item active">
            <a class="nav-link" href="home.html"><button type="button" class="btn btn-primary btn-lg">Home</button><span
                class="sr-only">(current)</span></a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="questionnaire.html"><button type="button" class="btn btn-primary btn-lg">Let us
                help you</button></a>
          </li>
        </ul>
      </div>
    </nav>

    <h4> Laptops </h4>
    <button onclick="next()" id="comparing" type="button" class="btn btn-outline-success">Go to comparing
      Screen</button>
  </header>
  <ul id="listed">

  </ul>



  <!--
        The script reads fields from all documents of laptop collections and add to the UL in HTML programatically.
    -->
  <script>
    //console log have been used to test the code.
    // The script to manipulate the DOM elements.

    window.compared = new Array(); // holds the IDs of documents to be compared in an array form.
    db.collection("laptops").get().then(function (
    querySnapshot) { //gets all documents from laptop collection in databse.
      var x = 1;

      querySnapshot.forEach(function (doc) { //processes each document of laptop collection.

        $(document).ready(function () {
          var c_con = doc.data().model;

          var d_con = doc.data().img;

          var f_con = doc.data().price;

          var y = "list" + x;


          var z = '<li class = "ani" id ="' + y + '"></li>';
          var z_id = '#' + y;


          $("#listed").append(z);
          var a = '<div class="card" id="' + y + 'carddiv">';
          var a_id = '#' + y + 'carddiv';

          //console.log(a);
          $(z_id).append(a); //y.a
          var b = '<div class="card-body" id="' + y + 'desdiv1">';
          var b_id = '#' + y + 'desdiv1';

          //console.log(b);
          $(a_id).append(b);
          var c = '<p class="card-text" id="' + y + 'model">' + c_con + '</p>';
          var c_id = '#' + y + 'cardp1';

          //console.log(c);
          $(b_id).append(c); //b.c

          var d = '<img id = "' + y + 'img" src="' + d_con + '"/>';
          var d_id = '#' + y + 'img';
          //console.log("image............" + d_id);
          //console.log(d);
          $(a_id).append(d); //a.d

          var e = '<div class="card-body" id="' + y + 'desdiv2">';
          var e_id = '#' + y + 'desdiv2';

          //console.log(e);
          $(a_id).append(e); //a.e

          var f = '<p class="card-text" id="' + y + 'price">$' + f_con + '</p>';
          var f_id = '#' + y + 'cardp2';

          //console.log(f);
          $(e_id).append(f);

          var dolo = doc.id;

          var compare = '<button  id="' + y + 'comare" type="button" value = ' + dolo +
            ' class="btn btn-success" onclick = "compareto(this.value)" >Add to Compare</button>';
          var compare_id = '#' + y + 'comare';

          var rev = '<button  id="' + y + 'rev" type="button" class="btn btn-success">Review</button>';
          var compare_id = '#' + y + 'rev';



          $(e_id).append(compare);
          $(e_id).append(rev);

          console.log("happy.......................");
          x++;

          var imagedim = { //setting CSS for image programatically.
            "width": "200px",
            "height": "100px"
          };
          $(d_id).css(imagedim);

          var liststyle = { //setting CSS for card lists.
            "list-style": "none",
            "margin": "0",
            "padding": "0",
            "max-width": "80%"
          };
          $("#listed").css(liststyle);

          var listpadding = {
            "margin": "5px"
          };
          $(".ani").css(listpadding);

          var hor = {
            "max-with": "40px",
            "margin": "5px"
          };
          $(compare_id).css(hor);

        })
      });
    });

    //This function adds the item to the an array which are to be compared.
    function compareto(itemid) {

      var agla = itemid;
      window.compared.push(itemid);
      console.log(window.compared);

    }
    //This function pushes the ids of documents to be compared in a array form via local storage.
    function next(itemid) {
      var l = "laptops";
      localStorage.setItem("pichla", JSON.stringify(window.compared));
      localStorage.setItem("coll", l);
      window.open("compare.html");
    }
  </script>


</body>

</html>