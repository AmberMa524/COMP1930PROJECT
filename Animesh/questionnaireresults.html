<!DOCTYPE html>

<html>

<head>

  <title> TEMP NAME </title>

  <meta charset="uf-8">

  <meta name="comp1930 boilerplate code" content="my bcit project">
  <meta name="author" content="BCIT">

  <!-- Bootstrap for Mobile-first -->
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>
  <!-- The core Firebase JS SDK is always required and must be listed first -->
  <script src="https://www.gstatic.com/firebasejs/7.4.0/firebase-app.js"></script>

  <!-- TODO: Add SDKs for Firebase products that you want to use
     https://firebase.google.com/docs/web/setup#available-libraries -->
  <script src="https://www.gstatic.com/firebasejs/7.4.0/firebase-analytics.js"></script>

  <!-- Add Firebase products that you want to use -->
  <script src="https://www.gstatic.com/firebasejs/7.2.2/firebase-auth.js"></script>
  <script src="https://www.gstatic.com/firebasejs/7.2.2/firebase-firestore.js"></script>
  <script src="https://cdn.firebase.com/libs/firebaseui/3.5.2/firebaseui.js"></script>
  <script src="dataManagement.js"></script>


  <script>



  </script>


</head>

<body>

  <header>

    <nav class="navbar navbar-expand-lg navbar-light bg-light">
      <a class="navbar-brand" href="home.html">TechAssist</a>
      <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent"
        aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>

      <div class="collapse navbar-collapse" id="navbarSupportedContent">
        <ul class="navbar-nav mr-auto">
          <li class="nav-item active">
            <a class="nav-link" href="home.html"><button type="button" class="btn btn-primary btn-lg">Home</button><span
                class="sr-only">(current)</span></a>
          </li>

          <li class="nav-item">
            <a class="nav-link" href="questionnaire.html"><button type="button" class="btn btn-primary btn-lg">Let us
                help you</button></a>
          </li>
        </ul>
        <form class="form-inline my-2 my-lg-0">
          <input class="form-control mr-sm-2" type="text" placeholder="Search" aria-label="Search">
          <button class="btn btn-outline-success my-2 my-sm-0" type="submit">Search</button>
        </form>
      </div>
    </nav>

  </header>

  <div id="welcome" align="center" padding-top="50px">

    <div id="firebaseui-auth-container"></div>

    <h2><b>Here Are Some Recommendations for You</b></h2>

    <div id="listed">



    </div>

  </div>

  <script>
    var firebaseConfig = {
      apiKey: "AIzaSyCWFoAHHXig43bLV6OG367BqhOPBlqrh4Q",
      authDomain: "oct31-72990.firebaseapp.com",
      databaseURL: "https://oct31-72990.firebaseio.com",
      projectId: "oct31-72990",
      storageBucket: "oct31-72990.appspot.com",
      messagingSenderId: "617005703861",
      appId: "1:617005703861:web:fdb1920a07d1b6338854fc",
      measurementId: "G-6T24W0NH6V"

    };
    // Initialize Firebase
    firebase.initializeApp(firebaseConfig);
    firebase.analytics();
    var db = firebase.firestore();


    console.log("Brand is " + getBrand());

    console.log("Device is " + getDevice());

    console.log("Budget is " + getBudget());

    /** Gets the input from the previous page.*/

    var deviceChoice = getDevice();

    var budgetChoice = getBudget();

    var brandChoice = getBrand();

    /** Potential criteria inputted by user. */

    var criteriaA1 = "Laptop";

    var criteriaA2 = "Tablet";

    var criteriaA3 = "Desktop";

    var criteriaB1 = "Under $80";

    var criteriaB2 = "$100 - $150";

    var criteriaB3 = "$150 - $200";

    var criteriaB4 = "$200 - $250";

    var criteriaB5 = "$250 - $300";

    var criteriaB6 = "Over $300";

    var criteriaC1 = "Apple";

    var criteriaC2 = "Android";

    var criteriaC3 = "Microsoft";

    var criteriaC4 = "Other";

    var criteriaA;

    var criteriaB;

    var criteriaC;

    /** Compares the criteria inputted by the user,
    with the potential criteria variables.
    If it matches one of the criteria variables,
    that becomes the primary criteria used to evaluate
    each device. */

    /** Determines the criteria used to judge
    the device. */


    if (criteriaA1 == deviceChoice) {

      criteriaA = criteriaA1;

    } else if (criteriaA2 == deviceChoice) {

      criteriaA = criteriaA2;

    } else if (criteriaA3 == deviceChoice) {

      criteriaA = criteriaA3;

    } else if (null == deviceChoice) {

      criteriaA = null;

    }

    /** Determines the criteria used to judge
the budget. */

    if (criteriaB1 = budgetChoice) {

      criteriaB = 80;

    } else if (criteriaB2 = budgetChoice) {

      criteriaB = 150;

    } else if (criteriaB3 = budgetChoice) {

      criteriaB = 200;

    } else if (criteriaB4 = budgetChoice) {

      criteriaB = 250;

    } else if (criteriaB5 = budgetChoice) {

      criteriaB = 300;

    } else if (criteriaB6 = budgetChoice) {

      criteriaB = 300;

    } else if (budgetChoice == null) {

      criteriaB = null;

    }

    /** Determines the criteria used to judge
    the brand. */

    if (criteriaC1 = brandChoice) {

      criteriaC = criteriaC1;

    } else if (criteriaC2 = budgetChoice) {

      criteriaC = criteriaC2;

    } else if (criteriaC3 = budgetChoice) {

      criteriaC = criteriaC4;

    } else if (criteriaC4 = budgetChoice) {

      criteriaC = criteriaC4;

    }

    //Logs the new criteria used to judge the devices.

    console.log(criteriaA);

    console.log(criteriaB);

    console.log(criteriaC);

    /** Creates the list of objects that appear on the list. */

    var listOfObjects = [];

    /** If laptops are selected as the criteria,
    then only laptops will be shown on the list. */

    if (criteriaA == criteriaA1) {

      db.collection("Laptop").get().then(function (querySnapshot) {

        querySnapshot.forEach(function (doc) {

          var itemName = doc.data().name;

          var itemImage = doc.data().image;

          var itemPrice = doc.data().price;

          var itemCompany = doc.data().company;

          var itemLink = doc.data().link;

          var itemIncrement1 = 0;

          /** If the item matches the company preference
          increment it once so that it will have a higher
          precedence on the list. */

          if (itemCompany == criteriaC) {

            itemIncrement1++;

            /** If the user picks other, then
              items from a company not listed on
              the questionnaire will have a
              higher precedence on the list. */

          } else if (criteriaC == criteriaC4) {

            if (itemCompany != criteriaC1) {

              if (itemCompany != criteriaC2) {

                if (itemCompany != criteriaC3) {

                  itemIncrement1++;

                }

              }

            }

          }

          /** If the item's price is lower than your budget,
           matches the company preference,
           increment it once so that it will have a higher
            precedence on the list. */

          if (itemPrice < criteriaB) {

            itemIncrement++;

          }

          /** Create a new object for the list of listings,
          which will contain its' values. */

          var newObject = { name: itemName, image: itemImage, price: itemPrice, company: itemCompany, link: itemLink, incrementation: itemIncrement1 };

          console.log(newObject);

          /** Pushes the object onto the
          list. */

          listOfObjects.push(newObject);

          console.log(newObject);
        });

      }).then(function () {

        /** Re-sorts the list based on the item's precendences. */

        listOfObjects.sort((a, b) => (a.incrementation > b.incrementation) ? -1 : 1);

        console.log(listOfObjects);

      }).then(function () {

        /** Goes through each object,
        and places it's listing on the list
        using DOM. */

        for (let i = 0; i < listOfObjects.length; i++) {

          var x = 1;

          $(document).ready(function () {

            console.log(listOfObjects[i]);

            let priceValue = (listOfObjects[i]).price;

            let nameValue = (listOfObjects[i]).name;

            let imageValue = (listOfObjects[i]).image;

            let companyValue = (listOfObjects[i]).company;

            let linkValue = (listOfObjects[i]).link;

            var y = "list" + x;


            var z = '<li class = "ani" id ="' + y + '"></li>';
            var z_id = '#' + y;


            $("#listed").append(z);
            var a = '<div class="card" id="' + y + 'carddiv">';
            var a_id = '#' + y + 'carddiv';

            console.log(a);
            $(z_id).append(a); //y.a
            var b = '<div class="card-body" id="' + y + 'desdiv1">';
            var b_id = '#' + y + 'desdiv1';

            console.log(b);
            $(a_id).append(b);
            var c = '<p class="card-text" id="' + y + 'model">' + nameValue + '</p>';
            var c_id = '#' + y + 'cardp1';

            console.log(c);
            $(b_id).append(c);//b.c

            var d = '<img id = "' + y + 'img" src="' + imageValue + '"/>';
            var d_id = '#' + y + 'img';
            console.log("image............" + d_id);
            console.log(d);
            $(a_id).append(d);//a.d

            var e = '<div class="card-body" id="' + y + 'desdiv2">';
            var e_id = '#' + y + 'desdiv2';

            console.log(e);
            $(a_id).append(e);//a.e

            var f = '<p class="card-text" id="' + y + 'price">' + priceValue + '</p>';
            var f_id = '#' + y + 'cardp2';

            console.log(f);
            $(e_id).append(f);

            var g = '<a href="' + linkValue + '"><button> See Page </button></a>';
            var g_id = '#' + y + 'seeMore';

            console.log(g);
            $(e_id).append(g);

            console.log("happy.......................");
            x++;

            var imagedim = { "width": "200px", "height": "100px" };
            $(d_id).css(imagedim);

            var liststyle = { "list-style": "none", "margin": "0", "padding": "0" };
            $("#listed").css(liststyle);

            var listpadding = { "margin": "5px" };
            $(".ani").css(listpadding);


          })


        }

      });

      /** If tablets are selected as the criteria,
      then only tablets will be shown on the list. */

    } else if (criteriaA == criteriaA2) {

      db.collection("Tablets").get().then(function (querySnapshot) {

        querySnapshot.forEach(function (doc) {

          var itemName = doc.data().name;

          var itemImage = doc.data().image;

          var itemPrice = doc.data().price;

          var itemCompany = doc.data().company;

          var itemLink = doc.data().link;

          var itemIncrement1 = 0;

          /** If the item matches the company preference
increment it once so that it will have a higher
precedence on the list. */


          if (itemCompany == criteriaC) {

            itemIncrement1++;

            /** If the user picks other, then
  items from a company not listed on
  the questionnaire will have a
  higher precedence on the list. */

          } else if (criteriaC == criteriaC4) {

            if (itemCompany != criteriaC1) {

              if (itemCompany != criteriaC2) {

                if (itemCompany != criteriaC3) {

                  itemIncrement1++;

                }

              }

            }

          }

          /** If the item's price is lower than your budget,
 matches the company preference,
 increment it once so that it will have a higher
  precedence on the list. */

          if (itemPrice < criteriaB) {

            itemIncrement++;

          }

          /** Create a new object for the list of listings,
      which will contain its' values. */

          var newObject = { name: itemName, image: itemImage, price: itemPrice, company: itemCompany, link: itemLink, incrementation: itemIncrement1 };

          console.log(newObject);

          /** Pushes the object onto the
      list. */

          listOfObjects.push(newObject);

          console.log(newObject);
        });

      }).then(function () {

        /** Re-sorts the list based on the item's precendences. */

        listOfObjects.sort((a, b) => (a.incrementation > b.incrementation) ? -1 : 1);

        console.log(listOfObjects);

      }).then(function () {

        /** Goes through each object,
      and places it's listing on the list
      using DOM. */

        for (let i = 0; i < listOfObjects.length; i++) {

          var x = 1;

          $(document).ready(function () {

            console.log(listOfObjects[i]);

            let priceValue = (listOfObjects[i]).price;

            let nameValue = (listOfObjects[i]).name;

            let imageValue = (listOfObjects[i]).image;

            let companyValue = (listOfObjects[i]).company;

            let linkValue = (listOfObjects[i]).link;

            var y = "list" + x;


            var z = '<li class = "ani" id ="' + y + '"></li>';
            var z_id = '#' + y;


            $("#listed").append(z);
            var a = '<div class="card" id="' + y + 'carddiv">';
            var a_id = '#' + y + 'carddiv';

            console.log(a);
            $(z_id).append(a); //y.a
            var b = '<div class="card-body" id="' + y + 'desdiv1">';
            var b_id = '#' + y + 'desdiv1';

            console.log(b);
            $(a_id).append(b);
            var c = '<p class="card-text" id="' + y + 'model">' + nameValue + '</p>';
            var c_id = '#' + y + 'cardp1';

            console.log(c);
            $(b_id).append(c);//b.c

            var d = '<img id = "' + y + 'img" src="' + imageValue + '"/>';
            var d_id = '#' + y + 'img';
            console.log("image............" + d_id);
            console.log(d);
            $(a_id).append(d);//a.d

            var e = '<div class="card-body" id="' + y + 'desdiv2">';
            var e_id = '#' + y + 'desdiv2';

            console.log(e);
            $(a_id).append(e);//a.e

            var f = '<p class="card-text" id="' + y + 'price">' + priceValue + '</p>';
            var f_id = '#' + y + 'cardp2';

            console.log(f);
            $(e_id).append(f);

            var g = '<a href="' + linkValue + '"><button> See Page </button></a>';
            var g_id = '#' + y + 'seeMore';

            console.log(g);
            $(e_id).append(g);

            console.log("happy.......................");
            x++;

            var imagedim = { "width": "200px", "height": "100px" };
            $(d_id).css(imagedim);

            var liststyle = { "list-style": "none", "margin": "0", "padding": "0" };
            $("#listed").css(liststyle);

            var listpadding = { "margin": "5px" };
            $(".ani").css(listpadding);


          })


        }

      });

      /** If desktops are selected as the criteria,
      then only desktops will be shown on the list. */

    } else if (criteriaA == criteriaA3) {

      db.collection("Desktops").get().then(function (querySnapshot) {

        querySnapshot.forEach(function (doc) {

          var itemName = doc.data().name;

          var itemImage = doc.data().image;

          var itemPrice = doc.data().price;

          var itemCompany = doc.data().company;

          var itemLink = doc.data().link;

          var itemIncrement1 = 0;

          /** If the item matches the company preference
          increment it once so that it will have a higher
          precedence on the list. */


          if (itemCompany == criteriaC) {

            itemIncrement1++;

            /** If the user picks other, then
            items from a company not listed on
            the questionnaire will have a
            higher precedence on the list. */

          } else if (criteriaC == criteriaC4) {

            if (itemCompany != criteriaC1) {

              if (itemCompany != criteriaC2) {

                if (itemCompany != criteriaC3) {

                  itemIncrement1++;

                }

              }

            }

          }

                    /** If the item's price is lower than your budget,
           matches the company preference,
           increment it once so that it will have a higher
            precedence on the list. */

          if (itemPrice < criteriaB) {

            itemIncrement++;

          }

                    /** Create a new object for the list of listings,
      which will contain its' values. */

          var newObject = { name: itemName, image: itemImage, price: itemPrice, company: itemCompany, link: itemLink, incrementation: itemIncrement1 };

          console.log(newObject);

          /** Pushes the object onto the
          list. */

          listOfObjects.push(newObject);

          console.log(newObject);
        });

      }).then(function () {

        /** Re-sorts the list based on the item's precendences. */

        listOfObjects.sort((a, b) => (a.incrementation > b.incrementation) ? -1 : 1);

        console.log(listOfObjects);

      }).then(function () {

        /** Goes through each object,
        and places it's listing on the list
        using DOM. */

        for (let i = 0; i < listOfObjects.length; i++) {

          var x = 1;

          $(document).ready(function () {

            console.log(listOfObjects[i]);

            let priceValue = (listOfObjects[i]).price;

            let nameValue = (listOfObjects[i]).name;

            let imageValue = (listOfObjects[i]).image;

            let companyValue = (listOfObjects[i]).company;

            let linkValue = (listOfObjects[i]).link;

            var y = "list" + x;


            var z = '<li class = "ani" id ="' + y + '"></li>';
            var z_id = '#' + y;


            $("#listed").append(z);
            var a = '<div class="card" id="' + y + 'carddiv">';
            var a_id = '#' + y + 'carddiv';

            console.log(a);
            $(z_id).append(a); //y.a
            var b = '<div class="card-body" id="' + y + 'desdiv1">';
            var b_id = '#' + y + 'desdiv1';

            console.log(b);
            $(a_id).append(b);
            var c = '<p class="card-text" id="' + y + 'model">' + nameValue + '</p>';
            var c_id = '#' + y + 'cardp1';

            console.log(c);
            $(b_id).append(c);//b.c

            var d = '<img id = "' + y + 'img" src="' + imageValue + '"/>';
            var d_id = '#' + y + 'img';
            console.log("image............" + d_id);
            console.log(d);
            $(a_id).append(d);//a.d

            var e = '<div class="card-body" id="' + y + 'desdiv2">';
            var e_id = '#' + y + 'desdiv2';

            console.log(e);
            $(a_id).append(e);//a.e

            var f = '<p class="card-text" id="' + y + 'price">' + priceValue + '</p>';
            var f_id = '#' + y + 'cardp2';

            console.log(f);
            $(e_id).append(f);

            var g = '<a href="' + linkValue + '"><button> See Page </button></a>';
            var g_id = '#' + y + 'seeMore';

            console.log(g);
            $(e_id).append(g);

            console.log("happy.......................");
            x++;

            var imagedim = { "width": "200px", "height": "100px" };
            $(d_id).css(imagedim);

            var liststyle = { "list-style": "none", "margin": "0", "padding": "0" };
            $("#listed").css(liststyle);

            var listpadding = { "margin": "5px" };
            $(".ani").css(listpadding);


          })


        }

      });

    }

  </script>


</body>



</html>